# Lazy Teacher

## Описание проекта
Lazy Teacher – набор скриптов на Python для быстрого развертывания и управления учебными стендами в кластере Proxmox VE. Проект позволяет автоматически создавать группы виртуальных машин (VM) для списков пользователей, управлять их конфигурациями и удалять стенды массово.

## Пример создания стенда (по шагам)

1. **Запуск меню**  
   ```bash
   python main.py
   ```
2. **Выбор пункта «1 – Создать стенды»** в главном меню.  
3. **Выбор конфигурации стенда**  
   - **Если конфигураций нет**  
     1. В меню будет предложено создать новую конфигурацию.  
     2. Введите имя конфигурации (например `student_group`).  
     3. После ввода имени откроется интерактивный редактор, где вы добавляете машины:  
        - Выберите шаблон VM (список шаблонов, доступных на выбранной ноде).  
        - Укажите имя машины (по умолчанию берётся имя шаблона).  
        - После выбора шаблона автоматически определяется его тип. Для корректного использования ecorouter имя шаблона должно начинаться с "eco-", пример eco-RTR-HQ.  
        - Добавьте сетевые интерфейсы:


        Пользователь вводит имена bridge‑мостов вручную, один за другим, пока не оставит пустую строку. 
        
        Пример ввода:
        ```
        Bridge (например **net100** или hq): **net100**
        Bridge (например **net100** или hq): hq
        Bridge (например **net100** и hq): hq.100
        ```
        - **`**net100**`** – если имя окружено двойными звёздочками (`**`), скрипт воспринимает его как **существующий пользовательский bridge**, созданный администратором в Proxmox. В этом случае будет использован указанный bridge без создания нового.  
        - **`hq`**, **`hq-isp`**, **`router`** и любые другие комбинации букв **без** двойных звёздочек трактуются как **alias**. При вводе alias скрипт автоматически создаёт новый bridge‑мост, начиная с `vmbr1000`. Первый созданный будет `vmbr1000`, следующий – `vmbr1001` и т.д.  
        - **'hq.100'** - трактуется так же как и alias но добавляется к bridge-мосту tag VLAN. Так же переводит данный bridge в состояние vlan_aware.
     4. После добавления всех машин сохраните конфигурацию. Файл будет сохранён как `student_group_stand.yaml` в каталоге `config/`.  
   - **Если конфигурации уже существуют**  
     1. В меню будет выведен список доступных файлов `*_stand.yaml`.  
     2. Выберите нужный файл, введя его номер.  
       

5. **Выбор списка пользователей**  
   - Можно выбрать готовый список из `*_list.yaml` или ввести имена вручную.  
   - При вводе вручную каждый пользователь вводится в отдельной строке, окончание ввода – пустая строка.  

6. **Определение типа клонирования** (полное клонирование(full) или Связанное(Linked)).  

7. **Выбор типа развертывания** - доступен только если в кластере PROXMOX более 1 ноды:
    - Равномерное распределение по нодам - в этом случае все стенды будут развернуты на всех нодах кластера равномерно.(шаблоны будут автоматически скопированы на удаленную ноду и список соответствий оригинального шаблона и скопированного на удаленную ноду будет записан в файл config/templates.yaml)
    - Развертывание на выбранной ноде - позволяет развернуть стенд на любой ноде кластера.

8. **Создание группы** – скрипт автоматически сформирует имя группы из имени стенда и списка пользователей.  

9. **Развёртывание VM** – в зависимости от выбранного типа, скрипт развернёт виртуальные машины на одной ноде или распределит их по кластерам.  

10. **Завершение** – после завершения процесса в меню будет выведено сообщение об успехе с информацией о логинах/паролях, и вы сможете вернуться в главное меню.

## Установка и запуск
1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

2. Запустите приложение:
   ```bash
   python main.py
   ```

## Структура репозитория
```
modules/          # исходный код (ui_menus, deletion, network, stands, …)
config/           # yaml‑конфиги стендов и списков пользователей
README.md         # текущий документ
requirements.txt  # зависимости проекта
LICENSE           # лицензия GNU GPL‑3.0
```

## Лицензия
Проект распространяется под лицензией **GNU GPL‑3.0**. Подробнее см. файл `LICENSE`.

Ссылка на репозиторий: https://github.com/yourname/lazy_teacher